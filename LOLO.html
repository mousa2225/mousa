<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„ÙŠÙˆÙ…ÙŠ</title>
<style>
/* ======================== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø© ======================== */
body {
  font-family: "Tahoma", Arial, sans-serif;
  background: linear-gradient(180deg, #e0f7fa 0%, #ffffff 100%);
  margin: 0;
  padding: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
  box-sizing: border-box;
}
h1 {
  color: #0288d1;
  text-align: center;
  margin-bottom: 25px;
  font-size: 24px;
}

/* ======================== Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø§Ø¯Ø®Ø§Ù„Ø§Øª ======================== */
.container {
  width: 100%;
  max-width: 480px;
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  padding: 20px;
  box-sizing: border-box;
  margin-bottom: 20px;
}
label {
  font-weight: bold;
  color: #00796b;
  font-size: 14px;
  margin-top: 10px;
}
input, select {
  width: 100%;
  padding: 10px;
  margin-top: 5px;
  border: 2px solid #03a9f4;
  border-radius: 6px;
  font-size: 14px;
  text-align: center;
  transition: 0.3s;
  box-sizing: border-box;
}
input:focus, select:focus {
  border-color: #0288d1;
  background-color: #e1f5fe;
  outline: none;
}
button {
  width: 100%;
  background-color: #03a9f4;
  color: white;
  border: none;
  padding: 10px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 15px;
  font-weight: bold;
  margin-top: 10px;
  transition: 0.3s;
}
button:hover {
  background-color: #0288d1;
}
button.delete {
  background-color: #f44336;
  font-size: 13px;
  padding: 6px 8px;
}

/* Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­ */
.success-message {
  color: green;
  font-weight: bold;
  text-align: center;
  display: none;
  margin-top: 10px;
  font-size: 14px;
}
.success-message::before { content: "âœ” "; }

/* ======================== Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ======================== */
.table-wrapper {
  width: 100%;
  overflow-x: auto;
  margin-top: 20px;
}
table {
  width: 100%;
  min-width: 400px;
  border-collapse: collapse;
  text-align: center;
  font-size: 13px;
}
th, td {
  border: 1px solid #03a9f4;
  padding: 8px;
  text-align: center;
}
th {
  background-color: #2196f3;
  color: white;
}
tr:nth-child(even) td {
  background-color: #e1bee7;
}

/* ======================== Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ØµØºÙŠØ±Ø© ======================== */
@media (max-width: 600px) {
  body { padding: 10px; }
  h1 { font-size: 20px; }
  .container { padding: 15px; }
  button { font-size: 14px; }
  table { font-size: 12px; }
}

/* ======================== Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠ ======================== */
.modal {
  display: none;
  position: fixed;
  z-index: 999;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.5);
}
.modal-content {
  background-color: #fff;
  margin: 5% auto;
  padding: 20px;
  border-radius: 14px;
  max-width: 480px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  position: relative;
  display: flex;
  flex-direction: column;
}
.close {
  position: absolute;
  top: 10px;
  right: 15px;
  font-size: 22px;
  font-weight: bold;
  cursor: pointer;
  color:#f44336;
}

/* ======================== ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ ======================== */
.signature {
  margin-top: 30px;
  font-family: 'Brush Script MT', cursive, sans-serif;
  font-size: 26px;
  color: #2c3e50;
  text-align: right;
  font-style: italic;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
}
</style>
</head>

<body>
<h1>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„ÙŠÙˆÙ…ÙŠ</h1>

<div class="container">
  <div class="success-message" id="successMsg">ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­</div>

  <label>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label>
  <input type="text" id="clientName">

  <label>Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label>
  <input type="text" id="clientNumber">

  <label>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¨Ø§Ù‚Ø©</label>
  <input type="number" id="packageValue">

  <label>Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</label>
  <input type="number" id="packageDays">

  <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…Ø³ØªÙØ§Ø¯ Ø¨Ù‡Ø§</label>
  <input type="number" id="daysUsed">

  <label>Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ùƒ</label>
  <input type="text" id="bankName">

  <label>Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ</label>
  <input type="text" id="bankAccount">

  <label>Ù†ÙˆØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</label>
  <select id="subscriptionType">
    <option value="" disabled selected hidden>Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</option>
    <option value="ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø¯ÙŠØ¯">ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø¯ÙŠØ¯</option>
    <option value="ØªØ·Ø¨ÙŠÙ‚ ØªØ¬Ø¯ÙŠØ¯">ØªØ·Ø¨ÙŠÙ‚ ØªØ¬Ø¯ÙŠØ¯</option>
    <option value="Ø¬Ø¯ÙŠØ¯ ÙŠØ¯ÙˆÙŠ">Ø¬Ø¯ÙŠØ¯ ÙŠØ¯ÙˆÙŠ</option>
    <option value="ØªØ¬Ø¯ÙŠØ¯ ÙŠØ¯ÙˆÙŠ">ØªØ¬Ø¯ÙŠØ¯ ÙŠØ¯ÙˆÙŠ</option>
  </select>

  <label>Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
  <input type="text" id="notes">

  <!-- Ø²Ø± Ø¬Ø¯ÙŠØ¯ ÙŠØ¬Ù…Ø¹ Ø§Ù„Ø­ÙØ¸ + Ø§Ù„Ø­Ø³Ø§Ø¨ -->
  <button onclick="addClientAndCalculate()">ğŸ’¾ Ø­ÙØ¸ ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ø§Ø³ØªØ±Ø¯Ø§Ø¯</button>
  <button onclick="openExceptionalModal()">ğŸŒŸ Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠ</button>

  <div class="signature">Accountant Mousa Muhammad</div>
</div>

<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠ -->
<div id="exceptionalModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeExceptionalModal()">&times;</span>
    <h2>Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠ</h2>
    <label>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label>
    <input type="text" id="exceptionalName">
    <label>Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label>
    <input type="text" id="exceptionalNumber">
    <label>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¨Ø§Ù‚Ø©</label>
    <input type="number" id="exceptionalPackageValue">
    <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… ÙÙŠ Ø§Ù„Ø¨Ø§Ù‚Ø©</label>
    <input type="number" id="exceptionalPackageDays">
    <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…Ø³ØªÙØ§Ø¯ Ø¨Ù‡Ø§</label>
    <input type="number" id="exceptionalDaysUsed">
    <label>Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ùƒ</label>
    <input type="text" id="exceptionalBank">
    <label>Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ</label>
    <input type="text" id="exceptionalAccount">
    <label>Ù†ÙˆØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</label>
    <select id="exceptionalType">
      <option value="" disabled selected hidden>Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</option>
      <option value="ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø¯ÙŠØ¯">ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø¯ÙŠØ¯</option>
      <option value="ØªØ·Ø¨ÙŠÙ‚ ØªØ¬Ø¯ÙŠØ¯">ØªØ·Ø¨ÙŠÙ‚ ØªØ¬Ø¯ÙŠØ¯</option>
      <option value="Ø¬Ø¯ÙŠØ¯ ÙŠØ¯ÙˆÙŠ">Ø¬Ø¯ÙŠØ¯ ÙŠØ¯ÙˆÙŠ</option>
      <option value="ØªØ¬Ø¯ÙŠØ¯ ÙŠØ¯ÙˆÙŠ">ØªØ¬Ø¯ÙŠØ¯ ÙŠØ¯ÙˆÙŠ</option>
    </select>
    <label>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ±Ø¯ ÙŠØ¯ÙˆÙŠÙ‹Ø§</label>
    <input type="number" id="exceptionalRefund">
    <label>Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
    <input type="text" id="exceptionalNotes">
    <button onclick="saveExceptionalClient()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠ</button>
  </div>
</div>

<!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ -->
<div class="table-wrapper">
  <table id="clientsTable">
    <tr>
      <th>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
      <th>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¨Ø§Ù‚Ø© (Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…)</th>
      <th>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ±Ø¯</th>
      <th>Ø­Ø°Ù</th>
    </tr>
  </table>
</div>

<button onclick="exportToExcel()">ğŸ“¥ Ø¥ØµØ¯Ø§Ø± Ù…Ù„Ù Excel</button>

<script>
let clients = [];

/* Ø¯Ù…Ø¬ Ø§Ù„Ø­ÙØ¸ + Ø§Ù„Ø­Ø³Ø§Ø¨ */
function addClientAndCalculate() {
  const name = clientName.value.trim();
  const number = clientNumber.value.trim();
  const value = parseFloat(packageValue.value);
  const totalDays = parseFloat(packageDays.value);
  const used = parseFloat(daysUsed.value);
  const bank = bankName.value.trim();
  const account = bankAccount.value.trim();
  const type = subscriptionType.value;
  const notes = notesInput.value.trim();

  if (!name || !number) return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… ÙˆØ±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„");
  if (used > totalDays) return alert("Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…Ø³ØªÙØ§Ø¯ Ø¨Ù‡Ø§ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØªØ¬Ø§ÙˆØ² Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„ÙƒÙ„ÙŠ");

  const refund = ((value / totalDays) * (totalDays - used)).toFixed(2);

  clients.push({ name, number, packageValue: value, packageDays: totalDays, daysUsed: used, bank, account, type, notes, refund, exceptional: false });
  renderTable();
  successMsg.style.display = 'block';
  setTimeout(()=> successMsg.style.display='none',2000);
  document.querySelectorAll('.container input').forEach(i=>i.value='');
}

/* Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¯ÙˆØ§Ù„ ÙƒÙ…Ø§ Ù‡ÙŠ ØªÙ…Ø§Ù…Ù‹Ø§ */
function openExceptionalModal(){ exceptionalModal.style.display='block'; }
function closeExceptionalModal(){ exceptionalModal.style.display='none'; }
function saveExceptionalClient(){
  const name = exceptionalName.value.trim();
  const number = exceptionalNumber.value.trim();
  const refund = parseFloat(exceptionalRefund.value);
  if (!name || !number || isNaN(refund)) return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø±Ù‚Ù… ÙˆØ§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ±Ø¯");
  clients.push({ name, number, refund: refund.toFixed(2), exceptional:true });
  closeExceptionalModal();
  renderTable();
}
function renderTable(){
  const table=document.getElementById("clientsTable");
  table.innerHTML=`<tr><th>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</th><th>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¨Ø§Ù‚Ø© (Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…)</th><th>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ±Ø¯</th><th>Ø­Ø°Ù</th></tr>`;
  clients.forEach((c,i)=>{
    table.innerHTML+=`<tr ${c.exceptional?'style="background-color:#fff3e0;"':''}>
    <td>${c.name}</td><td>${c.packageValue||'-'} (${c.packageDays||'-'})</td><td>${c.refund||'-'}</td>
    <td><button class="delete" onclick="deleteClient(${i})">ğŸ—‘ï¸</button></td></tr>`;
  });
}
function deleteClient(i){ if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ")){clients.splice(i,1);renderTable();}}
function exportToExcel(){ /* ÙƒÙ…Ø§ Ù‡Ùˆ Ù…Ù† ÙƒÙˆØ¯Ùƒ Ø§Ù„Ø£ØµÙ„ÙŠ */ }
</script>
</body>
</html>
